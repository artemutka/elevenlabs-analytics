<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аналитика использования аудиоплеера ElevenLabs</title>
    <!-- Подключаем React и ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Подключаем Babel для преобразования JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Подключаем Recharts для графиков -->
    <script src="https://unpkg.com/recharts@2.10.1/umd/Recharts.min.js"></script>
    <!-- Подключаем Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .recharts-wrapper {
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Распаковываем модули Recharts
        const {
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,
            PieChart, Pie, Cell, LineChart, Line
        } = Recharts;
        
        // Данные для графиков
        const overviewData = [{"name":"Общее количество загрузок плеера","value":1721,"color":"#8884d8"},{"name":"Общее количество воспроизведений","value":32,"color":"#82ca9d"},{"name":"Количество уникальных слушателей","value":29,"color":"#ffc658"}];
        const conversionData = [{"name":"Загрузки без воспроизведения","value":1689,"color":"#d32f2f"},{"name":"Загрузки с воспроизведением","value":32,"color":"#4caf50"}];
        const listenTimeDistribution = [{"name":"Менее 1 минуты","value":3,"color":"#ffeb3b"},{"name":"1-5 минут","value":3,"color":"#ff9800"},{"name":"5-10 минут","value":0,"color":"#f44336"},{"name":"Более 10 минут","value":3,"color":"#2196f3"}];
        const topArticlesByPlays = [{"name":"How to remove a broken screw","plays":11},{"name":"T-base Abutments","plays":4},{"name":"Digital Analog Calibration","plays":3},{"name":"Implant/Abutment Connection Types","plays":3},{"name":"Keratinized Gingiva","plays":3}];
        const topArticlesByTime = [{"name":"Why gaps appear between teeth","playback":1167},{"name":"How to remove a broken screw","playback":1078},{"name":"Keratinized Gingiva","playback":677},{"name":"Implant/Abutment Connection Types","playback":149},{"name":"T-base Abutments","playback":97}];
        const costMetrics = [{"name":"Стоимость на воспроизведение","value":0.63},{"name":"Стоимость на слушателя","value":0.69},{"name":"Стоимость на минуту","value":0.36}];
        
        // Функция для форматирования времени
        const formatPlaybackTime = (seconds) => {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}м ${remainingSeconds}с`;
        };
        
        // Цвета для графиков
        const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8', '#82ca9d'];
        
        // Компонент приложения
        const ElevenLabsAnalysis = () => {
            return (
                <div className="p-4 bg-gray-50">
                    <div className="mb-8 text-center">
                        <h1 className="text-2xl font-bold text-gray-800 mb-2">Аналитика использования аудиоплеера ElevenLabs</h1>
                        <h2 className="text-xl text-gray-600">Период: 31.01.2025 - 23.02.2025</h2>
                        <div className="mt-2 text-lg font-semibold text-blue-600">Стоимость сервиса: $20/месяц</div>
                    </div>
                    
                    {/* Основная статистика */}
                    <div className="bg-white p-4 rounded shadow mb-8">
                        <h3 className="text-lg font-semibold mb-4">Основные показатели</h3>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div className="bg-blue-50 p-3 rounded text-center">
                                <div className="text-2xl font-bold text-blue-600">1,721</div>
                                <div className="text-sm">Загрузок плеера</div>
                            </div>
                            <div className="bg-green-50 p-3 rounded text-center">
                                <div className="text-2xl font-bold text-green-600">32</div>
                                <div className="text-sm">Воспроизведений</div>
                            </div>
                            <div className="bg-amber-50 p-3 rounded text-center">
                                <div className="text-2xl font-bold text-amber-600">29</div>
                                <div className="text-sm">Уникальных слушателей</div>
                            </div>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div className="bg-indigo-50 p-3 rounded text-center">
                                <div className="text-2xl font-bold text-indigo-600">1.86%</div>
                                <div className="text-sm">Коэффициент воспроизведения</div>
                            </div>
                            <div className="bg-purple-50 p-3 rounded text-center">
                                <div className="text-2xl font-bold text-purple-600">55м 9с</div>
                                <div className="text-sm">Общее время воспроизведения</div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Использование плеера */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div className="bg-white p-4 rounded shadow">
                            <h3 className="text-lg font-semibold mb-4">Коэффициент конверсии загрузок в прослушивания</h3>
                            <ResponsiveContainer width="100%" height={250}>
                                <PieChart>
                                    <Pie
                                        data={conversionData}
                                        cx="50%"
                                        cy="50%"
                                        labelLine={false}
                                        outerRadius={100}
                                        fill="#8884d8"
                                        dataKey="value"
                                        label={({name, percent}) => `${name}: ${(percent * 100).toFixed(1)}%`}
                                    >
                                        {conversionData.map((entry, index) => (
                                            <Cell key={`cell-${index}`} fill={entry.color} />
                                        ))}
                                    </Pie>
                                    <Tooltip formatter={(value) => value.toLocaleString()} />
                                </PieChart>
                            </ResponsiveContainer>
                        </div>
                        
                        <div className="bg-white p-4 rounded shadow">
                            <h3 className="text-lg font-semibold mb-4">Распределение по времени прослушивания</h3>
                            <ResponsiveContainer width="100%" height={250}>
                                <PieChart>
                                    <Pie
                                        data={listenTimeDistribution}
                                        cx="50%"
                                        cy="50%"
                                        labelLine={false}
                                        outerRadius={100}
                                        fill="#8884d8"
                                        dataKey="value"
                                        label={({name, percent}) => percent > 0 ? `${name}: ${(percent * 100).toFixed(1)}%` : ''}
                                    >
                                        {listenTimeDistribution.map((entry, index) => (
                                            <Cell key={`cell-${index}`} fill={entry.color} />
                                        ))}
                                    </Pie>
                                    <Tooltip formatter={(value) => value.toLocaleString()} />
                                </PieChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                    
                    {/* Топ статей */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div className="bg-white p-4 rounded shadow">
                            <h3 className="text-lg font-semibold mb-4">Топ-5 статей по количеству воспроизведений</h3>
                            <ResponsiveContainer width="100%" height={300}>
                                <BarChart
                                    data={topArticlesByPlays}
                                    layout="vertical"
                                    margin={{ top: 5, right: 30, left: 40, bottom: 5 }}
                                >
                                    <CartesianGrid strokeDasharray="3 3" />
                                    <XAxis type="number" />
                                    <YAxis dataKey="name" type="category" width={150} />
                                    <Tooltip />
                                    <Bar dataKey="plays" fill="#8884d8" name="Воспроизведений" />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                        
                        <div className="bg-white p-4 rounded shadow">
                            <h3 className="text-lg font-semibold mb-4">Топ-5 статей по времени воспроизведения</h3>
                            <ResponsiveContainer width="100%" height={300}>
                                <BarChart
                                    data={topArticlesByTime}
                                    layout="vertical"
                                    margin={{ top: 5, right: 30, left: 40, bottom: 5 }}
                                >
                                    <CartesianGrid strokeDasharray="3 3" />
                                    <XAxis type="number" tickFormatter={(value) => formatPlaybackTime(value)} />
                                    <YAxis dataKey="name" type="category" width={150} />
                                    <Tooltip formatter={(value) => formatPlaybackTime(value)} />
                                    <Bar dataKey="playback" fill="#82ca9d" name="Время воспроизведения" />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>
                    </div>
                    
                    {/* Анализ стоимости */}
                    <div className="bg-white p-4 rounded shadow mb-8">
                        <h3 className="text-lg font-semibold mb-4">Анализ стоимости</h3>
                        <ResponsiveContainer width="100%" height={200}>
                            <BarChart
                                data={costMetrics}
                                margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
                            >
                                <CartesianGrid strokeDasharray="3 3" />
                                <XAxis dataKey="name" />
                                <YAxis tickFormatter={(value) => `$${value.toFixed(2)}`} />
                                <Tooltip formatter={(value) => `$${value.toFixed(2)}`} />
                                <Bar dataKey="value" fill="#d32f2f" name="Стоимость ($)" />
                            </BarChart>
                        </ResponsiveContainer>
                    </div>
                    
                    {/* Ключевые выводы */}
                    <div className="bg-white p-4 rounded shadow mb-8">
                        <h3 className="text-lg font-semibold mb-4">Ключевые выводы</h3>
                        <ul className="list-disc pl-5 space-y-2">
                            <li><span className="font-medium">Низкая конверсия:</span> Только 1.86% загрузок страниц с плеером приводят к воспроизведению</li>
                            <li><span className="font-medium">Количество прослушиваний:</span> 32 воспроизведения за 24 дня (около 1.3 в день)</li>
                            <li><span className="font-medium">Стоимость на прослушивание:</span> $0.63 на одно воспроизведение</li>
                            <li><span className="font-medium">Распределение по страницам:</span> Из 17 статей только 10 имеют хотя бы одно воспроизведение</li>
                            <li><span className="font-medium">Эффективные прослушивания:</span> 6 прослушиваний длились более 1 минуты (20.69% от всех)</li>
                        </ul>
                    </div>
                    
                    {/* Рекомендации */}
                    <div className="bg-white p-4 rounded shadow">
                        <h3 className="text-lg font-semibold mb-4">Варианты оптимизации</h3>
                        <div className="p-4 rounded border border-gray-200 mb-4">
                            <h4 className="font-medium mb-2">Возможные улучшения:</h4>
                            <ul className="list-disc pl-5 space-y-1">
                                <li>Сделать плеер более заметным на странице</li>
                                <li>Добавить привлекательное описание для аудиоверсии</li>
                                <li>Интегрировать плеер с другими элементами UX (например, предложить прослушать во время скроллинга)</li>
                                <li>Сократить количество страниц с плеером, оставив его только на самых популярных статьях</li>
                                <li>Рассмотреть альтернативные сервисы с более низкой стоимостью</li>
                            </ul>
                        </div>
                        <div className="p-4 bg-blue-50 rounded">
                            <div className="text-xl font-bold text-blue-700 mb-2">Вывод</div>
                            <p className="text-gray-700">Текущие показатели использования показывают низкий уровень вовлеченности пользователей в аудиоформат. Рекомендуется пересмотреть стратегию использования аудиоплеера или рассмотреть альтернативные варианты.</p>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Рендерим приложение
        ReactDOM.render(<ElevenLabsAnalysis />, document.getElementById('root'));
    </script>
</body>
</html>